DEBUG: Main function started
DEBUG: Parsing prefill arguments
DEBUG: Prefill URLs parsed: [("http://0.0.0.0:20003", None)]
DEBUG: Filtering CLI arguments
DEBUG: Raw args: ["target/release/sglang-router", "--pd-disaggregation", "--policy", "consistent_hash", "--prefill", "http://0.0.0.0:20003", "--decode", "http://0.0.0.0:20005", "--host", "0.0.0.0", "--port", "10001", "--prometheus-host", "0.0.0.0", "--prometheus-port", "29000"]
DEBUG: Parsing CLI arguments with clap
DEBUG: Filtered args: ["target/release/sglang-router", "--pd-disaggregation", "--policy", "consistent_hash", "--decode", "http://0.0.0.0:20005", "--host", "0.0.0.0", "--port", "10001", "--prometheus-host", "0.0.0.0", "--prometheus-port", "29000"]
DEBUG: CLI args parsed successfully
SGLang Router starting...
Host: 0.0.0.0:10001
Mode: PD Disaggregated
Policy: consistent_hash
Prefill nodes: [("http://0.0.0.0:20003", None)]
Decode nodes: ["http://0.0.0.0:20005"]
DEBUG: Converting to RouterConfig
DEBUG: RouterConfig created successfully
DEBUG: Validating configuration
DEBUG: Configuration validated successfully
DEBUG: Creating ServerConfig
DEBUG: ServerConfig created successfully
DEBUG: Creating Tokio runtime
DEBUG: Tokio runtime created successfully
DEBUG: Starting server startup function
DEBUG: Server startup function called
DEBUG: Initializing logging
DEBUG: Logging initialized
DEBUG: Initializing Prometheus metrics
DEBUG: Prometheus metrics initialized
[2m2025-09-17 19:00:07[0m [32m INFO[0m [2msglang_router_rs::server[0m[2m:[0m [2msrc/server.rs[0m[2m:[0m[2m574:[0m Starting router on 0.0.0.0:10001 | mode: PrefillDecode { prefill_urls: [("http://0.0.0.0:20003", None)], decode_urls: ["http://0.0.0.0:20005"], prefill_policy: None, decode_policy: None } | policy: ConsistentHash { virtual_nodes: 160 } | max_payload: 512MB
DEBUG: Creating HTTP client
DEBUG: HTTP client created
DEBUG: Creating AppContext
DEBUG: AppContext created
[2m2025-09-17 19:00:08[0m [32m INFO[0m [2msglang_router_rs::server[0m[2m:[0m [2msrc/server.rs[0m[2m:[0m[2m671:[0m Single router mode (enable_igw=false)
[2m2025-09-17 19:00:08[0m [32m INFO[0m [2msglang_router_rs::routers::http::router[0m[2m:[0m [2msrc/routers/http/router.rs[0m[2m:[0m[2m203:[0m Waiting for 2 workers to become healthy (timeout: 600s)
[2m2025-09-17 19:00:08[0m [32m INFO[0m [2msglang_router_rs::routers::http::router[0m[2m:[0m [2msrc/routers/http/router.rs[0m[2m:[0m[2m274:[0m All 2 workers are healthy
[2m2025-09-17 19:00:08[0m [32m INFO[0m [2msglang_router_rs::server[0m[2m:[0m [2msrc/server.rs[0m[2m:[0m[2m683:[0m Started health checker for workers with 60s interval
[2m2025-09-17 19:00:08[0m [32m INFO[0m [2msglang_router_rs::routers::http::pd_router[0m[2m:[0m [2msrc/routers/http/pd_router.rs[0m[2m:[0m[2m493:[0m Prefill drain coordinator started
[2m2025-09-17 19:00:08[0m [32m INFO[0m [2msglang_router_rs::server[0m[2m:[0m [2msrc/server.rs[0m[2m:[0m[2m698:[0m Started request queue with size: 100, timeout: 60s
[2m2025-09-17 19:00:08[0m [32m INFO[0m [2msglang_router_rs::middleware[0m[2m:[0m [2msrc/middleware.rs[0m[2m:[0m[2m335:[0m Starting concurrency queue processor
[2m2025-09-17 19:00:08[0m [32m INFO[0m [2msglang_router_rs::server[0m[2m:[0m [2msrc/server.rs[0m[2m:[0m[2m734:[0m Router ready | workers: ["http://0.0.0.0:20003", "http://0.0.0.0:20005"]
[2m2025-09-17 19:00:08[0m [32m INFO[0m [2msglang_router_rs::server[0m[2m:[0m [2msrc/server.rs[0m[2m:[0m[2m758:[0m Starting server on 0.0.0.0:10001
[2m2025-09-17 19:00:26[0m [32m INFO[0m [2msglang_router_rs::server[0m[2m:[0m [2msrc/server.rs[0m[2m:[0m[2m788:[0m Received Ctrl+C, starting graceful shutdown
[2m2025-09-17 19:00:26[0m [32m INFO[0m [2msglang_router_rs::routers::http::pd_router[0m[2m:[0m [2msrc/routers/http/pd_router.rs[0m[2m:[0m[2m552:[0m Prefill drain coordinator shutting down
[2m2025-09-17 19:00:26[0m [33m WARN[0m [2msglang_router_rs::middleware[0m[2m:[0m [2msrc/middleware.rs[0m[2m:[0m[2m375:[0m Concurrency queue processor shutting down
